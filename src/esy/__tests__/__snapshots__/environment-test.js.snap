// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`calculate() build with (dep with (dep with local export) with local export) 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep-of-dep/bin:<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep-of-dep/man:<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "dep-of-dep",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep-of-dep/bin:<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep-of-dep/man:<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
  ],
}
`;

exports[`calculate() build with (dep with local export) 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
  ],
}
`;

exports[`calculate() build with (dep with local export) with global export referencing dep built-in 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, dep",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, dep",
      },
    ],
  ],
}
`;

exports[`calculate() build with (dep with local export) with global export referencing dep local export 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, world",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, world",
      },
    ],
  ],
}
`;

exports[`calculate() build with (dep with local export) with local export referencing dep built-in 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "app__var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app__var",
        "value": "hello, dep",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "app__var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app__var",
        "value": "hello, dep",
      },
    ],
  ],
}
`;

exports[`calculate() build with (dep with local export) with local export referencing dep local export 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "app_var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app_var",
        "value": "hello, world",
      },
    ],
  ],
  "scope": Array [
    Array [
      "dep__name",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__name",
        "value": "dep",
      },
    ],
    Array [
      "dep__version",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "dep__root",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__root",
        "value": "<sandboxPath>/dep",
      },
    ],
    Array [
      "dep__depends",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__depends",
        "value": "",
      },
    ],
    Array [
      "dep__target_dir",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__target_dir",
        "value": "<storePath>/_build/dep",
      },
    ],
    Array [
      "dep__install",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__install",
        "value": "<storePath>/_install/dep",
      },
    ],
    Array [
      "dep__bin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__bin",
        "value": "<storePath>/_install/dep/bin",
      },
    ],
    Array [
      "dep__sbin",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__sbin",
        "value": "<storePath>/_install/dep/sbin",
      },
    ],
    Array [
      "dep__lib",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__lib",
        "value": "<storePath>/_install/dep/lib",
      },
    ],
    Array [
      "dep__man",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__man",
        "value": "<storePath>/_install/dep/man",
      },
    ],
    Array [
      "dep__doc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__doc",
        "value": "<storePath>/_install/dep/doc",
      },
    ],
    Array [
      "dep__stublibs",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__stublibs",
        "value": "<storePath>/_install/dep/stublibs",
      },
    ],
    Array [
      "dep__toplevel",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__toplevel",
        "value": "<storePath>/_install/dep/toplevel",
      },
    ],
    Array [
      "dep__share",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__share",
        "value": "<storePath>/_install/dep/share",
      },
    ],
    Array [
      "dep__etc",
      Object {
        "build": Build { id: "dep" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "dep__etc",
        "value": "<storePath>/_install/dep/etc",
      },
    ],
    Array [
      "dep__var",
      Object {
        "build": Build { id: "dep" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "dep__var",
        "value": "hello",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "dep",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/dep/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/dep/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "dep",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "app_var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app_var",
        "value": "hello, world",
      },
    ],
  ],
}
`;

exports[`calculate() build with global export referencing built-in (cur-version) 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, $cur__name",
      },
    ],
  ],
  "scope": Array [
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, $cur__name",
      },
    ],
  ],
}
`;

exports[`calculate() build with global export referencing built-in 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, app",
      },
    ],
  ],
  "scope": Array [
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello, app",
      },
    ],
  ],
}
`;

exports[`calculate() build with global exports 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello",
      },
    ],
  ],
  "scope": Array [
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "APP",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "APP",
        "value": "hello",
      },
    ],
  ],
}
`;

exports[`calculate() build with local exports 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "app__var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app__var",
        "value": "hello",
      },
    ],
  ],
  "scope": Array [
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "app__var",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "app__var",
        "value": "hello",
      },
    ],
  ],
}
`;

exports[`calculate() build with no exports 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
  ],
  "scope": Array [
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
  ],
}
`;

exports[`calculate() concatenating global exports (same level exports + package itself) 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:<storePath>/_install/lwt/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:<storePath>/_install/lwt/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/app/lib:<storePath>/_install/lwt/lib/ocaml:<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
  "scope": Array [
    Array [
      "ocamlfind__name",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__name",
        "value": "ocamlfind",
      },
    ],
    Array [
      "ocamlfind__version",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "ocamlfind__root",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__root",
        "value": "<sandboxPath>/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__depends",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__depends",
        "value": "ocaml",
      },
    ],
    Array [
      "ocamlfind__target_dir",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__target_dir",
        "value": "<storePath>/_build/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__install",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__install",
        "value": "<storePath>/_install/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__bin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__bin",
        "value": "<storePath>/_install/ocamlfind/bin",
      },
    ],
    Array [
      "ocamlfind__sbin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__sbin",
        "value": "<storePath>/_install/ocamlfind/sbin",
      },
    ],
    Array [
      "ocamlfind__lib",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__lib",
        "value": "<storePath>/_install/ocamlfind/lib",
      },
    ],
    Array [
      "ocamlfind__man",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__man",
        "value": "<storePath>/_install/ocamlfind/man",
      },
    ],
    Array [
      "ocamlfind__doc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__doc",
        "value": "<storePath>/_install/ocamlfind/doc",
      },
    ],
    Array [
      "ocamlfind__stublibs",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__stublibs",
        "value": "<storePath>/_install/ocamlfind/stublibs",
      },
    ],
    Array [
      "ocamlfind__toplevel",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__toplevel",
        "value": "<storePath>/_install/ocamlfind/toplevel",
      },
    ],
    Array [
      "ocamlfind__share",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__share",
        "value": "<storePath>/_install/ocamlfind/share",
      },
    ],
    Array [
      "ocamlfind__etc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__etc",
        "value": "<storePath>/_install/ocamlfind/etc",
      },
    ],
    Array [
      "lwt__name",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__name",
        "value": "lwt",
      },
    ],
    Array [
      "lwt__version",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "lwt__root",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__root",
        "value": "<sandboxPath>/lwt",
      },
    ],
    Array [
      "lwt__depends",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__depends",
        "value": "ocaml",
      },
    ],
    Array [
      "lwt__target_dir",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__target_dir",
        "value": "<storePath>/_build/lwt",
      },
    ],
    Array [
      "lwt__install",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__install",
        "value": "<storePath>/_install/lwt",
      },
    ],
    Array [
      "lwt__bin",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__bin",
        "value": "<storePath>/_install/lwt/bin",
      },
    ],
    Array [
      "lwt__sbin",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__sbin",
        "value": "<storePath>/_install/lwt/sbin",
      },
    ],
    Array [
      "lwt__lib",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__lib",
        "value": "<storePath>/_install/lwt/lib",
      },
    ],
    Array [
      "lwt__man",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__man",
        "value": "<storePath>/_install/lwt/man",
      },
    ],
    Array [
      "lwt__doc",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__doc",
        "value": "<storePath>/_install/lwt/doc",
      },
    ],
    Array [
      "lwt__stublibs",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__stublibs",
        "value": "<storePath>/_install/lwt/stublibs",
      },
    ],
    Array [
      "lwt__toplevel",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__toplevel",
        "value": "<storePath>/_install/lwt/toplevel",
      },
    ],
    Array [
      "lwt__share",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__share",
        "value": "<storePath>/_install/lwt/share",
      },
    ],
    Array [
      "lwt__etc",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__etc",
        "value": "<storePath>/_install/lwt/etc",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:<storePath>/_install/lwt/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:<storePath>/_install/lwt/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "app" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/app/lib:<storePath>/_install/lwt/lib/ocaml:<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
}
`;

exports[`calculate() concatenating global exports (same level exports) 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:<storePath>/_install/lwt/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:<storePath>/_install/lwt/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/lwt/lib/ocaml:<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
  "scope": Array [
    Array [
      "ocamlfind__name",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__name",
        "value": "ocamlfind",
      },
    ],
    Array [
      "ocamlfind__version",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "ocamlfind__root",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__root",
        "value": "<sandboxPath>/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__depends",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__depends",
        "value": "ocaml",
      },
    ],
    Array [
      "ocamlfind__target_dir",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__target_dir",
        "value": "<storePath>/_build/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__install",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__install",
        "value": "<storePath>/_install/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__bin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__bin",
        "value": "<storePath>/_install/ocamlfind/bin",
      },
    ],
    Array [
      "ocamlfind__sbin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__sbin",
        "value": "<storePath>/_install/ocamlfind/sbin",
      },
    ],
    Array [
      "ocamlfind__lib",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__lib",
        "value": "<storePath>/_install/ocamlfind/lib",
      },
    ],
    Array [
      "ocamlfind__man",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__man",
        "value": "<storePath>/_install/ocamlfind/man",
      },
    ],
    Array [
      "ocamlfind__doc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__doc",
        "value": "<storePath>/_install/ocamlfind/doc",
      },
    ],
    Array [
      "ocamlfind__stublibs",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__stublibs",
        "value": "<storePath>/_install/ocamlfind/stublibs",
      },
    ],
    Array [
      "ocamlfind__toplevel",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__toplevel",
        "value": "<storePath>/_install/ocamlfind/toplevel",
      },
    ],
    Array [
      "ocamlfind__share",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__share",
        "value": "<storePath>/_install/ocamlfind/share",
      },
    ],
    Array [
      "ocamlfind__etc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__etc",
        "value": "<storePath>/_install/ocamlfind/etc",
      },
    ],
    Array [
      "lwt__name",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__name",
        "value": "lwt",
      },
    ],
    Array [
      "lwt__version",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "lwt__root",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__root",
        "value": "<sandboxPath>/lwt",
      },
    ],
    Array [
      "lwt__depends",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__depends",
        "value": "ocaml",
      },
    ],
    Array [
      "lwt__target_dir",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__target_dir",
        "value": "<storePath>/_build/lwt",
      },
    ],
    Array [
      "lwt__install",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__install",
        "value": "<storePath>/_install/lwt",
      },
    ],
    Array [
      "lwt__bin",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__bin",
        "value": "<storePath>/_install/lwt/bin",
      },
    ],
    Array [
      "lwt__sbin",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__sbin",
        "value": "<storePath>/_install/lwt/sbin",
      },
    ],
    Array [
      "lwt__lib",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__lib",
        "value": "<storePath>/_install/lwt/lib",
      },
    ],
    Array [
      "lwt__man",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__man",
        "value": "<storePath>/_install/lwt/man",
      },
    ],
    Array [
      "lwt__doc",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__doc",
        "value": "<storePath>/_install/lwt/doc",
      },
    ],
    Array [
      "lwt__stublibs",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__stublibs",
        "value": "<storePath>/_install/lwt/stublibs",
      },
    ],
    Array [
      "lwt__toplevel",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__toplevel",
        "value": "<storePath>/_install/lwt/toplevel",
      },
    ],
    Array [
      "lwt__share",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__share",
        "value": "<storePath>/_install/lwt/share",
      },
    ],
    Array [
      "lwt__etc",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "lwt__etc",
        "value": "<storePath>/_install/lwt/etc",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:<storePath>/_install/lwt/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:<storePath>/_install/lwt/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind lwt",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "lwt" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/lwt/lib/ocaml:<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
}
`;

exports[`calculate() concatenating global exports 1`] = `
Object {
  "env": Array [
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind ocaml",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
  "scope": Array [
    Array [
      "ocaml__name",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__name",
        "value": "ocaml",
      },
    ],
    Array [
      "ocaml__version",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "ocaml__root",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__root",
        "value": "<sandboxPath>/ocaml",
      },
    ],
    Array [
      "ocaml__depends",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__depends",
        "value": "",
      },
    ],
    Array [
      "ocaml__target_dir",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__target_dir",
        "value": "<storePath>/_build/ocaml",
      },
    ],
    Array [
      "ocaml__install",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__install",
        "value": "<storePath>/_install/ocaml",
      },
    ],
    Array [
      "ocaml__bin",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__bin",
        "value": "<storePath>/_install/ocaml/bin",
      },
    ],
    Array [
      "ocaml__sbin",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__sbin",
        "value": "<storePath>/_install/ocaml/sbin",
      },
    ],
    Array [
      "ocaml__lib",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__lib",
        "value": "<storePath>/_install/ocaml/lib",
      },
    ],
    Array [
      "ocaml__man",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__man",
        "value": "<storePath>/_install/ocaml/man",
      },
    ],
    Array [
      "ocaml__doc",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__doc",
        "value": "<storePath>/_install/ocaml/doc",
      },
    ],
    Array [
      "ocaml__stublibs",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__stublibs",
        "value": "<storePath>/_install/ocaml/stublibs",
      },
    ],
    Array [
      "ocaml__toplevel",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__toplevel",
        "value": "<storePath>/_install/ocaml/toplevel",
      },
    ],
    Array [
      "ocaml__share",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__share",
        "value": "<storePath>/_install/ocaml/share",
      },
    ],
    Array [
      "ocaml__etc",
      Object {
        "build": Build { id: "ocaml" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocaml__etc",
        "value": "<storePath>/_install/ocaml/etc",
      },
    ],
    Array [
      "ocamlfind__name",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__name",
        "value": "ocamlfind",
      },
    ],
    Array [
      "ocamlfind__version",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "ocamlfind__root",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__root",
        "value": "<sandboxPath>/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__depends",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__depends",
        "value": "ocaml",
      },
    ],
    Array [
      "ocamlfind__target_dir",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__target_dir",
        "value": "<storePath>/_build/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__install",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__install",
        "value": "<storePath>/_install/ocamlfind",
      },
    ],
    Array [
      "ocamlfind__bin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__bin",
        "value": "<storePath>/_install/ocamlfind/bin",
      },
    ],
    Array [
      "ocamlfind__sbin",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__sbin",
        "value": "<storePath>/_install/ocamlfind/sbin",
      },
    ],
    Array [
      "ocamlfind__lib",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__lib",
        "value": "<storePath>/_install/ocamlfind/lib",
      },
    ],
    Array [
      "ocamlfind__man",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__man",
        "value": "<storePath>/_install/ocamlfind/man",
      },
    ],
    Array [
      "ocamlfind__doc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__doc",
        "value": "<storePath>/_install/ocamlfind/doc",
      },
    ],
    Array [
      "ocamlfind__stublibs",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__stublibs",
        "value": "<storePath>/_install/ocamlfind/stublibs",
      },
    ],
    Array [
      "ocamlfind__toplevel",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__toplevel",
        "value": "<storePath>/_install/ocamlfind/toplevel",
      },
    ],
    Array [
      "ocamlfind__share",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__share",
        "value": "<storePath>/_install/ocamlfind/share",
      },
    ],
    Array [
      "ocamlfind__etc",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "ocamlfind__etc",
        "value": "<storePath>/_install/ocamlfind/etc",
      },
    ],
    Array [
      "app__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__name",
        "value": "app",
      },
    ],
    Array [
      "app__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "app__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "app__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__depends",
        "value": "ocamlfind ocaml",
      },
    ],
    Array [
      "app__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "app__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__install",
        "value": "<storePath>/_install/app",
      },
    ],
    Array [
      "app__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__bin",
        "value": "<storePath>/_install/app/bin",
      },
    ],
    Array [
      "app__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__sbin",
        "value": "<storePath>/_install/app/sbin",
      },
    ],
    Array [
      "app__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__lib",
        "value": "<storePath>/_install/app/lib",
      },
    ],
    Array [
      "app__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__man",
        "value": "<storePath>/_install/app/man",
      },
    ],
    Array [
      "app__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__doc",
        "value": "<storePath>/_install/app/doc",
      },
    ],
    Array [
      "app__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__stublibs",
        "value": "<storePath>/_install/app/stublibs",
      },
    ],
    Array [
      "app__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__toplevel",
        "value": "<storePath>/_install/app/toplevel",
      },
    ],
    Array [
      "app__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__share",
        "value": "<storePath>/_install/app/share",
      },
    ],
    Array [
      "app__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "app__etc",
        "value": "<storePath>/_install/app/etc",
      },
    ],
    Array [
      "OCAMLFIND_CONF",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "OCAMLFIND_CONF",
        "value": "<storePath>/_build/app/_esy/findlib.conf",
      },
    ],
    Array [
      "PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "PATH",
        "value": "<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:$PATH",
      },
    ],
    Array [
      "MAN_PATH",
      Object {
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "MAN_PATH",
        "value": "<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:$MAN_PATH",
      },
    ],
    Array [
      "cur__name",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__name",
        "value": "app",
      },
    ],
    Array [
      "cur__version",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__version",
        "value": "0.1.0",
      },
    ],
    Array [
      "cur__root",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__root",
        "value": "<sandboxPath>/app",
      },
    ],
    Array [
      "cur__depends",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__depends",
        "value": "ocamlfind ocaml",
      },
    ],
    Array [
      "cur__target_dir",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__target_dir",
        "value": "<storePath>/_build/app",
      },
    ],
    Array [
      "cur__install",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__install",
        "value": "<storePath>/_insttmp/app",
      },
    ],
    Array [
      "cur__bin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__bin",
        "value": "<storePath>/_insttmp/app/bin",
      },
    ],
    Array [
      "cur__sbin",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__sbin",
        "value": "<storePath>/_insttmp/app/sbin",
      },
    ],
    Array [
      "cur__lib",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__lib",
        "value": "<storePath>/_insttmp/app/lib",
      },
    ],
    Array [
      "cur__man",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__man",
        "value": "<storePath>/_insttmp/app/man",
      },
    ],
    Array [
      "cur__doc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__doc",
        "value": "<storePath>/_insttmp/app/doc",
      },
    ],
    Array [
      "cur__stublibs",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__stublibs",
        "value": "<storePath>/_insttmp/app/stublibs",
      },
    ],
    Array [
      "cur__toplevel",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__toplevel",
        "value": "<storePath>/_insttmp/app/toplevel",
      },
    ],
    Array [
      "cur__share",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__share",
        "value": "<storePath>/_insttmp/app/share",
      },
    ],
    Array [
      "cur__etc",
      Object {
        "build": Build { id: "app" },
        "builtIn": true,
        "exclusive": true,
        "exported": false,
        "name": "cur__etc",
        "value": "<storePath>/_insttmp/app/etc",
      },
    ],
    Array [
      "CAML_LD_LIBRARY_PATH",
      Object {
        "build": Build { id: "ocamlfind" },
        "builtIn": false,
        "exclusive": false,
        "exported": true,
        "name": "CAML_LD_LIBRARY_PATH",
        "value": "<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml",
      },
    ],
  ],
}
`;

exports[`printEnvironment() printing environment 1`] = `
"# Esy Sandbox
export OCAMLFIND_CONF=\\"<storePath>/_build/app/_esy/findlib.conf\\"
export PATH=\\"<storePath>/_install/ocaml/bin:<storePath>/_install/ocamlfind/bin:<storePath>/_install/lwt/bin:$PATH\\"
export MAN_PATH=\\"<storePath>/_install/ocaml/man:<storePath>/_install/ocamlfind/man:<storePath>/_install/lwt/man:$MAN_PATH\\"
# app@0.1.0 app
export cur__name=\\"app\\"
export cur__version=\\"0.1.0\\"
export cur__root=\\"<sandboxPath>/app\\"
export cur__depends=\\"ocamlfind lwt\\"
export cur__target_dir=\\"<storePath>/_build/app\\"
export cur__install=\\"<storePath>/_insttmp/app\\"
export cur__bin=\\"<storePath>/_insttmp/app/bin\\"
export cur__sbin=\\"<storePath>/_insttmp/app/sbin\\"
export cur__lib=\\"<storePath>/_insttmp/app/lib\\"
export cur__man=\\"<storePath>/_insttmp/app/man\\"
export cur__doc=\\"<storePath>/_insttmp/app/doc\\"
export cur__stublibs=\\"<storePath>/_insttmp/app/stublibs\\"
export cur__toplevel=\\"<storePath>/_insttmp/app/toplevel\\"
export cur__share=\\"<storePath>/_insttmp/app/share\\"
export cur__etc=\\"<storePath>/_insttmp/app/etc\\"
export CAML_LD_LIBRARY_PATH=\\"<storePath>/_install/app/lib:<storePath>/_install/lwt/lib/ocaml:<storePath>/_install/ocamlfind/lib/ocaml:<storePath>/_install/ocaml/lib/ocaml\\""
`;
